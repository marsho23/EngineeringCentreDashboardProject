@*
    For more information on enabling MVC for empty projects, visit http://go.microsoft.com/fwlink/?LinkID=397860
*@

<div>
    <table>
        <thead>
            <tr>
                <th>Title</th>
                <th>Description</th>
                <th>Due Date</th>
                <th>Is Completed</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="todoListContainer">
            <tr>
                <td>Title</td>
                <td>Description</td>
                <td>Due Date</td>
                <td>Is Completed</td>
                <td>Actions</td>
            </tr>
       
            <!-- To Do items will be inserted here -->
        </tbody>
    </table>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        function loadToDoList() {
            axios.get('/api/ToDo/getall')
                .then(function (response) {
                    var data = response.data;
                    var container = document.getElementById('todoListContainer');
                    container.innerHTML = '';

                    data.forEach(todo => {
                        var row = document.createElement('tr');
                        row.innerHTML = `
                                        <td>${todo.title}</td>
                                        <td>${todo.description}</td>
                                        <td>${new Date(todo.dueDate).toLocaleDateString()}</td>
                                        <td>${todo.isCompleted}</td>
                                        <td>
                                            <button onclick="deleteToDoItem(${todo.id})">Delete</button>
                                        </td>
                                    `;

                        container.appendChild(row);
                    });
                })
                .catch(function (error) {
                    console.log(error);
                });
        }

        function deleteToDoItem(id) {
            console.log('Delete item with ID:', id);
        }

        function updateToDoItem(id) {
            console.log('Edit item with ID:', id);
        }
    </script>
}

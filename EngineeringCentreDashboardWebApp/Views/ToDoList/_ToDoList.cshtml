@*
    For more information on enabling MVC for empty projects, visit http://go.microsoft.com/fwlink/?LinkID=397860
*@

<div>
    <table class="table">
        <thead>
            <tr>
                <th>Title</th>
                <th>Description</th>
                <th>Due Date</th>
                <th>Is Completed</th>
            </tr>
        </thead>
        <tbody id="todoListContainer">
            <!-- To Do items will be inserted here -->
        </tbody>
    </table>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        axios.get('/api/ToDo/getall')
            .then(function (response) {
                var data = response.data;
                var container = document.getElementById('todoListContainer');
                container.innerHTML = '';

                data.forEach(todo => {
                    var row = document.createElement('tr');
                    row.innerHTML = `
                                <td>${todo.title}</td>
                                <td>${todo.description}</td>
                                <td>${new Date(todo.dueDate).toLocaleDateString()}</td>
                                <td>${todo.isCompleted}</td>
                            `;

                    container.appendChild(row);
                });
            })
            .catch(function (error) {
                console.log(error);
            });
    </script>
}
